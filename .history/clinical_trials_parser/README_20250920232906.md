# Clinical Data Parsers (ClinicalTrials.gov & Cancer.gov PDQ)

Проект выполнен в рамках стажировки **Кловери.Старт**.  
Цель — собрать и подготовить текстовые данные о клинических исследованиях и клинических рекомендациях по онкологии для последующего анализа и использования в системе поддержки врачебных консилиумов (RAG-ассистент).

---

## 1. ClinicalTrials.gov Exporter

Ноутбук: `clinical_trials.ipynb`

### Возможности
- Массовая выгрузка исследований с [ClinicalTrials.gov](https://clinicaltrials.gov/) по поисковому термину (по умолчанию — `cancer`);
- Сохранение структурированных данных в CSV и полных текстов в TXT;
- Поддержка надёжных запросов (`Retry`, backoff, кастомный User-Agent);
- Чекпоинты сохранения для больших выгрузок.

### Выходные данные
- **CSV**: `clinical_trials_cancer.csv`  
  Колонки: `NCTId, Study Title, Brief Summary, Conditions, Interventions, Primary Outcome Measures, Secondary Outcome Measures, Other Outcome Measures, Researcher Description, Results URL`
- **TXT**: папка `studies_txt/` с полными текстами исследований (один файл = одно исследование).

## 2. Cancer.gov PDQ Scraper

**Ноутбук**: `Recommendations_cancergov.ipynb`

### Возможности
- Поиск и загрузка HP-версий PDQ-документов (профессиональные версии) с сайта [cancer.gov](https://www.cancer.gov);  
- Обход всех типов рака из каталога `/types`;  
- Сохранение текстов PDQ в TXT и индекса документов в CSV.  

### Выходные данные
- **CSV**: `pdq_index_requests.csv` (`type, title, url, file`);  
- **TXT**: папка `pdq_texts_requests/` с полными текстами PDQ.  

---

## 3. Интеграция в консилиум-ассистент (RAG)

Оба источника использовались как база знаний для модели:

- **Подготовка данных** — очистка, разбиение на фрагменты, нормализация;  
- **Векторизация** — преобразование текстов в эмбеддинги (BioBERT/клинические модели);  
- **Поиск** — хранение в Qdrant/Faiss, поиск *top-k* релевантных отрывков;  
- **RAG-запрос** — встраивание фрагментов в промпт, генерация ответа с цитатами NCT/PDQ.  

Таким образом, врачи на консилиуме могли быстро получать справку по исследованиям и рекомендациям.